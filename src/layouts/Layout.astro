---
import BaseLayout from "@/layouts/BaseLayout.astro";
import Header from "@/components/Header.astro";
import Footer from "@/components/Footer.astro";
import type { SeoInput } from "@/utils/seo";

const {
  seo,

  // legacy props (kept so existing pages don't explode)
  title,
  description,
  canonical,
  ogImage,
  robots,
  breadcrumbs,
  dataset,
  type,
} = Astro.props;

const legacySeo: SeoInput = {
  ...(title ? { title } : {}),
  ...(description ? { description } : {}),
  ...(canonical ? { canonical } : {}),
  ...(ogImage ? { ogImage } : {}),
  ...(robots ? { robots } : {}),
  ...(breadcrumbs ? { breadcrumbs } : {}),
  ...(dataset ? { dataset } : {}),
  ...(type ? { type } : {}),
};

const resolvedSeo: SeoInput = (seo ?? legacySeo) as SeoInput;
---

<BaseLayout seo={resolvedSeo}>
  <div class="page">
    <Header />
    <main>
      <slot />
    </main>
    <Footer />
  </div>
</BaseLayout>

<style>
  .page {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }

  main {
    flex: 1;
  }
</style>
